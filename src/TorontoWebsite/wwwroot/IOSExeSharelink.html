<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Sharelink</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/common.js"></script>
</head>
<body text-align="center" style="background-color:white">
    <!-- a标签的链接，设置为对应的下载链接；点击打开的动作，在click事件中注册 -->
    <div class="login-container">
        <button id="openApp" style="font-size:larger" onclick="javascript: redirectAppStore();">Sharelink In App Store</button>
    </div>
    <script type="text/javascript">
        var appStoreUrl = 'https://itunes.apple.com/cn/app/id477927812'

        function redirectAppStore() {
            window.location.href = appStoreUrl;
            return true;
        }

        var slUrl  = 'sharelink://'+ getUrlParam('cmd');
		// 通过iframe的方式试图打开APP，如果能正常打开，会直接切换到APP，并自动阻止a标签的默认行为
        // 否则打开a标签的href链接

        var ifr = document.createElement('iframe');
        ifr.src = slUrl;
        ifr.style.display = 'none';
        document.body.appendChild(ifr);

        window.location.href = slUrl;

        window.setTimeout(function () {
            document.body.removeChild(ifr);
        }, 3000);
        redirectAppStore();
    </script>
</body>
</html>
